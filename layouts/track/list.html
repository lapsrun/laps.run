{{ define "main" }}
<h2>{{.Title}}</h2>
      <!-- "{{.Content}}" pulls from the markdown content of the corresponding _index.md -->

<p>
  {{ partial "breadcrumb.html" . }}
  {{ partial "tag-list.html" . }}
</p>

<div>{{.Content}}</div>
<div>
  {{ range .Sections.ByTitle }}
    <div>
        <h4><a href="{{ .RelPermalink }}">{{ .Title }}</a></h4>
        {{ .Summary }}
        <!-- <a href="{{.Permalink}}">{{.Date.Format "2006-01-02"}} | {{.Title}}</a> -->
    </div>
  {{ end }}

  {{ with .Data.Pages }}
    <table>
      <tr>
        <th>Name</th>
        <th>Speed Rating â†“</th>
        <!-- <th>Static Speed Rating</th> -->
        <th>Turn Geometry [shape]</th>
        <th>Elevation (m)</th>
        <th>Home Lanes</th>
        <th>Lap Lanes</th>
        <th>Color</th>
        <th>Surface</th>
      </tr>
      {{ range sort . ".Params.speed_rating" "desc" }}
        {{ partial "computed_track_fields.html" . }}
        {{ $shape_ratio := .Scratch.Get "shape_ratio" }}
        {{ $turn_distance := .Scratch.Get "turn_distance" }}
        {{ $straight_distance := .Scratch.Get "straight_distance" }}
        {{ $speed_rating := .Scratch.Get "speed_rating" }}
        {{ $geometry_type := .Scratch.Get "geometry_type" }}

        <tr>
            <td><a href="{{ .RelPermalink }}">{{ .Title }}</a></td>
            <td>{{ lang.NumFmt 2 $speed_rating }}</td>
            <!-- <td>{{ .Params.speed_rating }}</td> -->
            <td>{{ $geometry_type }} [{{ lang.NumFmt 2 (mul $shape_ratio 100) }}%]</td>
            <td>{{ .Params.elevation_meters }}</td>
            <td>{{ .Params.home_lanes }}</td>
            <td>{{ .Params.lap_lanes }}</td>
            <td>{{ .Params.surface_color }}</td>
            <td>{{ .Params.surface_type }}</td>
        </tr>
      {{ end }}
    </table>
  {{ end }}
</div>
<div>
  {{ with  .OutputFormats.Get "csv" -}}
    <h5><a href="{{ .Permalink }}">CSV</a></h5>
  {{- end }}
</div>
{{ end }}
